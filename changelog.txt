changelog ASP


DB from 4.1 to 5.0
PHP from 5.0 to 5.1

schema changes

chaging everything to soft delete that affects back-end. 
checks deleting security profiles for in use
priorities are soft deleted. they will still show in reports with (deleted) so that reports can be generated.
added error message in case javascipt is disabled for places that use error() to communicate with the user. uses systemwide alert message style
added clear data to metadata manager so that it is possible to clear an F field.
username/accesscode per customer
URL support added. requires wildcard apache configs. uses the path component right after root dir. alphanumeric. ex: http://asp.schoolmessenger.com/myschool555/
added customer creation script
added retry time to job options. this is set when the job is saved/submitted based on the customer setting.
added intermediate 'waiting' workitem status. this is set when a result comes in and we are going to queue a task that needs to wait for the retry time. retry time is used to calculate the 'nextrun' for the task. the workschedule will move these to 'schduled' when the 'nextrun' is expired.
added $IS_COMMSUITE to common.inc.php to help flag the differences between the ASP and the normal commsuite
added support for external content handlers. this is currently configured in inc/content.inc.php. a content handler for get/put was added to the main pages so that we can use the DB for now.
DBMappedObject changes to support quoting fields.
fixed typo in security helper for customerOwns() that would cause it to never work.
changed schedule.trigger to schedule.triggertype because 'trigger' is a reserved word in MySQL 5.0
fixed addressbook list when there is more than 1 phone number. right now it will only display the first phone#.
changed content type when downloading audio files from the preview so that the browser doesnt try to display it inline again.
strtotime return value for invalid dates changed in php 5.1, so a lot of code was updated to check for either the old or new value.
possible speed improvement when updating pdvalues in import.
import.php now logs in /usr/commsuite/logs
import.php should skip empty rows
fixed many date validation problems in jobs. it will still let you schedule for some time in the past, but this is needed since it is possible to edit an expiring job w/o extending its run time.
removed call stats graphs for ASP
added experimental preview support (not fully tested until TTS server is working). To use go to previewmessage.php?id=123
removed option to add security profile settings for print, imports, and metadata when ASP.
fixed reports. was showing 1 line per phone #, now shows last phone # called
fixed typo in import mapping page.
fixed typo in upload audio.

changed the way settings are handled. settings are now stored in an ini file (inc/settings.ini.php) and read everywhere else. this way you don't need to edit php files after upgrading, the settings.ini.php file can simply be removed from the update source.
